---
layout: post
title:  "Stack and heap"
rootCate: "work"
categories:
- architecture
tags:
- work
- data-struct
- architecture
---

总结数据结构堆栈以及内存里堆栈有关的基础概念，总结多种实现方法。
<!---more--->

## 数据结构里的堆栈
### Heap
堆（数据结构）：堆可以被看成是一棵树，如：堆排序。

数据结构中堆是满足父子节点大小（比如大根堆中规定父节点的值要比子节点大）关系的一种完全二叉树。

由于是完全二叉树，可以用数组来实现，用节点编号来访问和操作节点，简化程序，提升效率。

而其大小关系则为我们查询堆中极值提供了常数级别的时间复杂度，**又由二叉树的性质，排序、插入和删除则为对数级别时间复杂度。**

这就好像地位不同的人在排队，排在最前面的一定是地位最高的人，所以堆是优先队列（Priority Queue）实现的基础。优先级队列，虽然也有先进先出的基本特性，但还要使得数据的出队顺序按照优先级来，优先级最高的，最先出队。利用这一特性，可以加速某些需要频繁取队列中极值的算法比如 A* 算法等。

优先级队列的应用: 1.合并有序小文件；2.高性能定时器；3.取top k元素；4.取中位数。 

### Stack
栈（数据结构）：一种先进后出的数据结构。

数据结构中的栈则是一种相当简单的结构。就像是只有一个口的深深的文件桶，先进去的文件会被压在下面（push），而且我们每次只能取到最上面的文件（pop），体现了其先进后出（FILO）的特性。虽然栈操作简单，但也有如单调栈等在栈内保持一定数据特性的变种。

类方法有: 入栈、出栈、peek 存取栈顶元素、判断是否为空、判断是否满、size 自增
 

## 内存里的堆栈
### Heap
操作系统中的堆和栈都是指内存空间，不同的是堆为按需申请、动态分配，例如 C 中的 malloc 函数和 C++ 中的 new 操作（当然 C++ 的 new 不仅仅是申请内存这么简单）。内存中的空闲空间并不是连续的，而是不同程序占用了不同的一块一块的内存，即使是同一个程序也可能占用了不同地方的多块内存。


### Stack
操作系统的栈则是程序运行时自动拥有的一小块内存，大小在编译期时由编译器参数决定，用于局部变量的存放或者函数调用栈的保存。

### 申请效率的比较：    
栈由系统自动分配，速度较快。但程序员是无法控制的。    堆是由new分配的内存，一般速度比较慢，而且容易产生内存碎片,不过用起来最方便.

### 体会：
使用栈就象我们去饭馆里吃饭，只管点菜（发出申请）、付钱、和吃（使用），吃饱了就走，不必理会切菜、洗菜等准备工作和洗碗、刷锅等扫尾工作，他的好处是快捷，但是自由度小。

使用堆就象是自己动手做喜欢吃的菜肴，比较麻烦，但是比较符合自己的口味，而且自由度大。

 

## 参考文献
[什么事对？什么是栈？](https://www.zhihu.com/question/19729973/answer/390903646)
[堆的实现及应用(Python)](https://www.jianshu.com/p/e0a40d6748b8)